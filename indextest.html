<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.babylonjs.com/babylon.max.js"></script>
    <title>JumpSouls</title>
    <style>
        #canvas{
            width:100%;
            height:100%;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        window.addEventListener("DOMContentLoaded", function(){
            var canvas = document.getElementById("canvas");
            var engine = new BABYLON.Engine(canvas,true);

            //set up scene
            
            var createScene = function(){
                var scene = new BABYLON.Scene(engine);
                
                scene.clearColor = new BABYLON.Color3.White();

                //make box
                //var box = BABYLON.Mesh.CreateBox("Box",4.0,scene);
                //var box2 = BABYLON.Mesh.CreateBox("Box2",4.0,scene);
                //var material = new BABYLON.StandardMaterial("material1",scene);
                //material.wireframe = true;
                //box2.material = material;
                //box2.position = new BABYLON.Vector3(0,5,0);
                
                //make lights
                var light = new BABYLON.PointLight("pointLight", new BABYLON.Vector3(5,10,5), scene);
                //light.diffuse = new BABYLON.Color3(1,0,0);

                //light on off
                scene.actionManager = new BABYLON.ActionManager(scene);
                scene.actionManager.registerAction(
                    new BABYLON.ExecuteCodeAction( { trigger: BABYLON.ActionManager.OnKeyUpTrigger, parameter: " "},
                    function(){
                        light.setEnabled(!light.isEnabled());
                    }));
                //set up camera
                /* free cam/first person
                var camera = new BABYLON.FreeCamera("camera1",
                    new BABYLON.Vector3(0,0,-10), scene);
                    camera.setTarget(BABYLON.Vector3.Zero());

                    //camera controls
                camera.attachControl(canvas,true);
                camera.keysUp.push(87);
                camera.keysDown.push(83);
                camera.keysLeft.push(65);
                camera.keysRight.push(68);
                */
               //arc rotate cam

                var camera = new BABYLON.ArcRotateCamera("arcCamera",
                    BABYLON.Tools.ToRadians(45),
                    BABYLON.Tools.ToRadians(45),
                    10.0, box.position, scene);
                camera.attachControl(canvas,true);
                

                //follow cam
                /*
                var camera = new BABYLON.FollowCamera("followCam",BABYLON.Vector3.
                    Zero(),scene,box);
                camera.radius = 50;
                camera.heightOffset = 50;
                camera.attachControl(canvas,true);
                */
                
                return scene;
            } 

            //load scene
            BABYLON.SceneLoader.Load("","Knight.babylon",engine, function(scene){
                var camera = new BABYLON.ArcRotateCamera("Camera", 1, 1, 4, BABYLON.Vector3.Zero(), scene);
            camera.attachControl(canvas, false);

            scene.clearColor = new BABYLON.Color3(1, 1, 1);
            scene.ambientColor = new BABYLON.Color3.White;
            engine.runRenderLoop(function(){
                //scene.getMeshByName("Box").position.z -= 0.01;
                
                //color change light
                /*
                var light = scene.getLightByName("pointLight");
                light.diffuse.g += 0.01;
                light.diffuse.b += 0.01;
                light.diffuse.r += 0.01;
                */
                scene.render();
            });

            //render loop 
            
            //var scene = createScene();
            //engine.runRenderLoop(function(){
                //scene.getMeshByName("Box").position.z -= 0.01;
                
                //color change light
                /*
                var light = scene.getLightByName("pointLight");
                light.diffuse.g += 0.01;
                light.diffuse.b += 0.01;
                light.diffuse.r += 0.01;
                */
              //  scene.render();
            });
        });
    </script>
</body>
</html>